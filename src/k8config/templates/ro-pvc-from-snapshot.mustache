#
# Create a many-read PVC based on the node snapshot
#
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: "{{ro_pvc_name}}"
  namespace: "{{namespace}}"
  labels:
    project_id: "{{project_id}}"
    local_id: "{{local_id}}"
    testrun_id: "{{testrun_id}}"
    branch: "{{branch}}"
spec:
  storageClassName: "cykubed-storageclass"
  accessModes:
    - ReadOnlyMany
  dataSource:
    apiGroup: snapshot.storage.k8s.io
    kind: VolumeSnapshot
    name: "{{snapshot_name}}"
  resources:
    requests:
      storage: "{{storage}}Gi"
